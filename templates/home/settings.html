{% extends 'base.html' %}
{% load static %}
{% block settings %}

{% include 'header/index.html' %}

<div class="container-fluid mt-2">
    <h4  class="text-center">LIST SAHAM </h4>
    <table id="table_settings" class="table table-striped table-bordered text-white" style="width:100%">
        <thead>
            <tr>
                <th class="text-center">NO</th>
                <th class="text-center">CODE</th>
                <th class="text-center">COMPANY</th>
                <th class="text-center">LISTING BOARD</th>
            </tr>
        </thead>
        <tbody>
            {% for all_stocks in stocks_settings %}
            <tr class="text-center">
                <td class="text-center" >{{ forloop.counter }}</td>
                <td>{{ all_stocks.code }}</td>
                <td>{{ all_stocks.company_name }}</td>
                <td>{{ all_stocks.listing_board }}</td>
            </tr>
            {% endfor %} 
        </tbody>
    </table>
</div> 


<script>
    $(document).ready(function() {
        var table = $('#table_settings').DataTable({
            "ajax": {
                "url": "{% url 'settings' %}",
                "dataSrc": ""
            },
            processing: true,
            serverSide: true,
            "columns": [
                { "data": "code" },
                { "data": "company_name" },
                { "data": "listing_board" }
            ]
        });

        // Fungsi untuk memuat ulang data tabel setiap 3 detik
        function reloadData() {
            table.ajax.reload(null, false); // Opacity untuk efek Loading
        }

        // Memuat ulang data setiap 3 detik
        var intervalId = setInterval(function() {
            reloadData();
        }, 3000);
    });
</script>

{% endblock %}